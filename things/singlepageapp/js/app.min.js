!function(window){function init(url){app.router=routers[getHash(url)]||app["default"],ajax({url:app.router+"?v="+app.v,success:function(response){try{eval(response.substring(response.indexOf("<script>")+8,response.indexOf("</script>")))(app),app.view.innerHTML=response}catch(err){console.log(err)}}})}function getHash(e){try{return e.split("#")[1]}catch(t){return null}}function ajax(e){function t(e){a(e)}function n(e){return 200!=s.status?void r(e):void u(o(s.responseText))}function r(e){p(o(s.responseText))}function i(e){d(o(s.responseText))}function o(e){var t=e;try{t=JSON.parse(t)}catch(n){}return t}var s=new XMLHttpRequest;s.addEventListener("progress",t,!1),s.addEventListener("load",n,!1),s.addEventListener("error",r,!1),s.addEventListener("loadend",i,!1);var c=function(){},a="function"==typeof e.progress?e.progress:c,u="function"==typeof e.success?e.success:c,p="function"==typeof e.failed?e.failed:c,d="function"==typeof e.complete?e.complete:c;s.open(e.type||"GET",e.url,0==e.async?e.async:!0),s.send(e.data)}function bi_click(e){e.addEventListener("click",function(e){e.target.hasAttribute("bi-back")&&history.go(-1)},!1)}var routers={"/index":"tpl/index.html","/test":"tpl/test.html","/test2":"tpl/test2.html"},app={"default":routers["/index"],router:"",view:document.querySelector("[bi-view]"),v:"0.0.2"};init(window.location.href),bi_click(app.view),window.onhashchange=function(e){init(e.newURL)}}(window);