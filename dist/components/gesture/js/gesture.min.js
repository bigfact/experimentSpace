!function(t){function o(t,o){var e=n(arguments,2);return function(){return t.apply(o,e.concat(n(arguments)))}}function n(t,o){return o=o>=0?o:0,Array.from?Array.from(t).slice(o):Array.prototype.slice.call(t,o)}function e(t){var o,n;if(t.touches){o=[],n=0==t.touches.length?t.touches=t.changedTouches:t.touches;for(var e=0;e<n.length;e++)o.push({x:n[e].clientX,y:n[e].clientY})}return o=o||[{x:t.clientX||t.pageX,y:t.clientY||t.pageY}]}function i(t){var o=t[0].x-t[1].x,n=t[0].y-t[1].y;return Math.sqrt(o*o+n*n)}function r(t){t.preventDefault(),t.stopPropagation()}function c(t){var o=this;o.obj=t,o.type="",o.points={},o.scale=1,o.callback={},o.config={type:{up:"up",down:"down",left:"left",right:"right",zoom:"zoom",click:"click"},zoomradix:1}}return c.prototype={init:function(t){var n=this;n.start=o(n.start,n),n.zoom=o(n.zoom,n),n.obj.addEventListener("mousedown",n.start,!1),n.obj.addEventListener("touchstart",n.start,!1),n.obj.addEventListener("mousewheel",n.zoom,!1),n.obj.addEventListener("DOMMouseScroll",n.zoom,!1),n.callback=t},start:function(t){var n=this;r(t),n.points.first=e(t),n.type=n.config.type.click,n.doing=o(n.doing,n),n.finish=o(n.finish,n),n.obj.addEventListener("mousemove",n.doing,!1),n.obj.addEventListener("mouseup",n.finish,!1),n.obj.addEventListener("touchmove",n.doing,!1),n.obj.addEventListener("touchend",n.finish,!1),"function"==typeof n.callback.start&&n.callback.start()},doing:function(t){var o=this;if(r(t),o.points.current=e(t),o.points.current.length<2){var n=o.points.current[0].x-o.points.first[0].x,i=o.points.current[0].y-o.points.first[0].y;Math.abs(n)>Math.abs(i)&&(o.type=n>0?o.config.type.right:o.config.type.left),Math.abs(n)<Math.abs(i)&&(o.type=i>0?o.config.type.down:o.config.type.up),"function"==typeof o.callback.doing&&o.callback.doing()}else o.zoom()},finish:function(t){var o=this;r(t),o.points.last=e(t),o.obj.removeEventListener("mousemove",o.doing,!1),o.obj.removeEventListener("mouseup",o.finish,!1),o.obj.removeEventListener("touchmove",o.doing,!1),o.obj.removeEventListener("touchend",o.finish,!1),"function"==typeof o.callback.finish&&o.callback.finish()},zoom:function(t){var o=this,n=0;if(t)r(t),n=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3;else{var e=i(o.points.first),c=i(o.points.current);o.points.first=o.points.current,c>e&&(n=1),c<e&&(n=-1)}n>0&&(o.scale+=o.config.zoomradix),n<0&&(o.scale-=o.config.zoomradix),o.type=o.config.type.zoom,"function"==typeof o.callback.doing&&o.callback.doing()}},t.Gesture=c,c}(window);