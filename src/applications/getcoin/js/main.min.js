function Game(){var t=this;t.fullcoin=500,t.gameblock=document.getElementsByClassName("gameblock")[0],t.timeall=10,t.tabtime=document.getElementsByClassName("tabtime")[0],t.tabpoint=document.getElementsByClassName("tabpoint")[0],t.point=0,t.time=t.timeall,t.coinSet=null,t.mintime=60,t.timenow=0}function clock(t,e,n){t>0&&e>0&&setTimeout(function(){t--,n(t),clock(t,e,n)},e)}function getSpotPosition(t){var e={};return void 0!=t.touches&&(e.x=t.touches[0].clientX,e.y=t.touches[0].clientY),e.x=e.x||t.clientX||t.pageX,e.y=e.y||t.clientY||t.pageY,e}var click="click",touchstart="touchstart";$(document).ready(function(){$(".popup .close i").on(click,function(){$(".popup").hide()});var t=new Game;t.timeall=1,$(".activityTime button").on(click,function(t){$("#gameontip").show()}),$("#gameontip button").on(click,function(){$(".activityTime").hide(),$(".gameblock").show(),$(".infoblock").addClass("infoblock2"),$("#gameontip").hide(),$(".countdown").show(),clock(4,1e3,function(e){if(0==e)$(".countdown").hide(),t.init(function(){$("#gameover #point").text(t.point),$("#gameover #shortof").text(t.fullcoin-t.point),$("#gameover").show()});else{var n=e-1;0==n&&(n="GO!"),$(".countdown .time").text(n)}})})}),Game.prototype={init:function(t){var e=this;e.timenow=0,e.point=0,e.time=e.timeall,e.tabtime.innerText=e.timeall,e.tabpoint.innerText=e.point,null!=e.coinSet&&e.coinSet.parentNode.removeChild(coins),e.coinSet=document.createElement("div"),e.gameblock.appendChild(e.coinSet),e.gameblock.addEventListener("click",function(t){e.onclick(t,e)},!1),e.gameblock.addEventListener("touchstart",function(t){e.onclick(t,e)},!1),0==e.point&&clock(e.timeall,1e3,function(n){e.tabtime.innerText=n,e.time=n,0==e.time&&"function"==typeof t&&t()})},onclick:function(t,e){t.preventDefault(),t.stopPropagation(),e.time>0&&Date.now()-e.timenow>e.mintime&&(e.timenow=Date.now(),e.point++,e.newcoin(t)),e.tabpoint.innerText=e.point},newcoin:function(t){var e=document.createElement("div");e.className="coin",e.style.top=getSpotPosition(t).y-50+"px",e.style.left=getSpotPosition(t).x-50+"px",this.coinSet.appendChild(e)}};